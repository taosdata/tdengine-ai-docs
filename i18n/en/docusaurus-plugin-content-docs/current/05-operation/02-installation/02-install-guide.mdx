import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Installation Guide

## Prerequisites

TDengine IDP requires the following prerequisites:
1. Python: Version 3.10-3.12
2. Java: Version 21 or above
3. glibc: Version 2.25 or above

## Installation

Please select the appropriate installation method according to your operating system. The detailed steps for each method are as follows:

<Tabs>

<TabItem label="tar.gz Installation" value="tar">
1. Download the latest `.tar.gz` package from the [Version List](../../release-history/version) page.
2. Run the following commands to extract and install. Replace `<version>` with the actual version number.
   ```bash
   tar zxvf tdengine-idp-enterprise-<version>-linux.tar.gz
   cd tdengine-idp-enterprise-<version>
   ./install.sh
   ```
3. The default installation path for TDengine IDP is `/usr/local/taos/idp`. After successful installation, the terminal will display "TDengine IDP has been installed successfully!".
4. For more installation options, run:
   ```bash
   ./install.sh -h
   ```
</TabItem>

<TabItem label="deb Installation" value="deb">
1. Download the latest `.deb` package from the [Version List](../../release-history/version) page.
2. Run the following command to install the deb package. Replace `<version>` with the actual version number.
   ```bash
   dpkg -i tdengine-idp-enterprise-<version>-linux.deb
   ```
3. The default installation path for TDengine IDP is `/usr/local/taos/idp`. After successful installation, the terminal will display "TDengine IDP has been installed successfully!".
</TabItem>

<TabItem label="rpm Installation" value="rpm">
1. Download the latest `.rpm` package from the [Version List](../../release-history/version) page.
2. Run the following command to install the rpm package. Replace `<version>` with the actual version number.
   ```bash
   rpm -i tdengine-idp-enterprise-<version>-linux.rpm
   ```
3. The default installation path for TDengine IDP is `/usr/local/taos/idp`. After successful installation, the terminal will display "TDengine IDP has been installed successfully!".
</TabItem>

<TabItem label="macOS Installation" value="macos">
1. Download the latest macOS installation package (.pkg) from the [Version List](../../release-history/version) page.
2. Double-click the package and follow the prompts to complete the installation.
3. The default installation path for TDengine IDP is `/usr/local/taos/idp`.
</TabItem>

<TabItem label="Windows Installation" value="windows">
1. Download the latest Windows installation package (.exe) from the [Version List](../../release-history/version) page.
2. Double-click the installer and follow the prompts to complete the installation.
3. After installation, the default path for TDengine IDP is `C:\tdengine-idp`.
</TabItem>

</Tabs>

## Startup

<Tabs>

<TabItem label="Linux System" value="linux">
After installation, you can use the `svc-tdengine-idp` command to start the TDengine IDP service process.
```bash
sudo svc-tdengine-idp start
```

You can also use other `svc-tdengine-idp` commands to check service status, stop the service, etc. For example:
```bash
sudo svc-tdengine-idp status # Check service status
sudo svc-tdengine-idp stop   # Stop the service
```

You can also use the `systemctl` command to manually manage these services. For example, for the `tdengine-idp` service:
```bash
sudo systemctl start tdengine-idp
sudo systemctl stop tdengine-idp
sudo systemctl status tdengine-idp
sudo systemctl restart tdengine-idp
```

:::info
- Running `systemctl` and `svc-tdengine-idp` commands requires _root_ privileges. For non-root users, please add `sudo` before the command.
:::
</TabItem>

<TabItem label="macOS System" value="macos">
After installation, you can use the `svc-tdengine-idp` command to start the TDengine IDP service process.

```bash
sudo svc-tdengine-idp start
```

You can also use other `svc-tdengine-idp` commands to check service status or stop the service:
```bash
sudo svc-tdengine-idp status
sudo svc-tdengine-idp stop
```

If you want to manually manage these services, you can use the following commands. For example, for `tdengine-idp`:
```bash
sudo launchctl start com.taosdata.tdengine-idp
sudo launchctl stop com.taosdata.tdengine-idp
sudo launchctl list | grep tdengine-idp
sudo launchctl print system/com.taosdata.tdengine-idp
```

:::info
- Managing `com.taosdata.tdengine-idp` with `launchctl` requires administrator privileges. Always use `sudo` for security.
- The first column returned by `sudo launchctl list | grep tdengine-idp` is the PID of the java process started by tdengine-idp. If it is `-`, the tdengine-idp service is not running.
- If the service is abnormal, check the system log `launchd.log` or the logs under `/usr/local/taos/idp/logs` for more information.
:::
</TabItem>

<TabItem label="Windows System" value="windows">
After installation, you can start the TDengine IDP service process by running the `sc` command in a cmd window with administrator privileges, or by double-clicking the `TDengine IDP` icon on the desktop.
```bat
sc start tdengine-idp
```

If you want to manually manage these services, you can run the `sc` command in a cmd window with administrator privileges. For example, for the `tdengine-idp` service:
```bat
sc start tdengine-idp
sc stop tdengine-idp
sc query tdengine-idp
```
</TabItem>

</Tabs>

After TDengine IDP starts normally, it includes the following three services:
- `tdengine-idp-h2`: Stores TDengine IDP metadata and configuration.
- `tdengine-idp-chat`: Handles AI-related tasks and analysis.
- `tdengine-idp`: Core service, responsible for management and data access.

## Uninstallation

1. On Linux/macOS, you can uninstall TDengine IDP with the following command:
```bash
rmtdengine-idp -e yes
```
If you want to keep data, logs, and configuration, run:
```bash
rmtdengine-idp -e no
```
2. On Linux, if installed via rpm, uninstall with:
```bash
rpm -e tdengine-idp
```
3. On Linux, if installed via deb, uninstall with:
```
dpkg -r tdengine-idp
```
4. On Windows, go to the installation directory `C:\tdengine-idp` and double-click the uninstaller (unins000.exe) to uninstall.