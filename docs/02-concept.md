# 基本概念

## 元素 (Element)

在 TDasset 里，元素是指一个物理的或逻辑的实体。它可以是具体的物理设备（比如一台汽车），物理设备的一个子系统（比如一台汽车的刹车），甚至到一个传感器。它也可以是逻辑的，比如一座工厂、一个集团、一个城市等。
元素通过树状结构来进行组织管理，树状结构里的任何一个节点都对应一个元素。一个元素可以有 0 到多个子元素、0 到多个父元素，0 到多个属性、0 到多个分析、0 到多个面板、0 到多个看板、一个通知模版。

## 子元素、父元素 (Child Element/Parent Element)

一个元素可以有 0 到多个子元素。比如一台发电的风机有风轮系统、传动系统、发电系统、偏航系统、控制系统、塔架与基础系统，以及辅助系统。风机的这些系统都是风机的子元素。子元素还可以有子元素，比如风机的发电系统还有发电机、变频器等子元素。一个风力发电厂拥有多台风机，这些风机又都是风力发电厂这个元素的子元素。
除了根节点的元素之外，元素都有父元素。比如风力发电厂是风机的父元素，而风机又是发电系统的父元素。由于元素还可以定义引用，一个元素可以有一到多个父元素。元素引用在高级话题上将被介绍。

## 属性 (Attribute)

一个元素拥有 0 到多个属性。这些属性可以是配置项、静态标签值，也可以是动态的时序数据，还可以是分析产生的结果数据。在 TDasset 的设计里，一个元素属性的具体值可以直接保存在 TDasset 系统里，也可以通过数据引用不保存在 TDasset 里。
数据引用是指一个属性并不存储在 TDasset 里，而是通过计算获得或是保存在 TDengine 或关系型数据库里。计算是指该属性是基于其他属性的值计算出来的，比如智能电表的功率这个属性，是通过属性电流与属性电压相乘获得的，我们只需要配置计算的表达式即可。如果属性的值是保存在 TDengine 或其他数据库，需要指定数据库的表名和列名。
对于指标类的属性可以设置极限值、目标值，可以设置物理单位，显示的小数点位数，设置它的预测配置。

## 分析 (Analysis)

一个元素有 0 到多个分析。分析是完全基于 TDengine 的流式计算实现的。流式计算的触发方式包括滑动窗口、事件窗口、状态窗口、计数窗口以及会话窗口，而且一个新写入的数据点也可以触发计算。这些触发是基于该元素的一个或多个属性，并且必须配置为数据引用，类型为 TDengine Metric。具体的计算可以是表达式、时间窗口的聚合计算，或多个元素的聚合计算。计算结果可以写入到元素的一个属性保存起来，还可以产生事件。

## 事件 (Event)

任何一个元素都有关联的事件，事件是由该元素的分析生成的。事件有开始和结束时间，还包含用户想记录的属性值或流式计算生成的计算结果，便于做事件的分析。事件可以指定严重程度，可以指定是否需要确认。

## 面板、看板 (Panel/Dashboard)

一个元素可以有 0 到多个看板，每个看板包含 1 个或多个 Panel（面板）。面板也可以独立于看板存在。每个面板是基于一个元素或它的子元素的属性的可视化，包括趋势图 (Trend Chart)、柱状图 (Bar Chart)、饼图 (Pie Chart)、报表 (Table)、统计量 (Stat)、仪表盘 (Gauge) 等。

## 通知规则 (Notification Rule)

对于事件，可以发送通知提醒用户。通知的内容可以定制，包含用户想包含的任何内容。对于一个元素，通知模版只有一个。但对于不同的事件类型，可以指定发送通知的严重级别。

## 元素模版 (Element Template)

真实世界里，同一类型的设备或实体有多个，他们有同样的属性、需要做同样的分析、建同样的看板、面板，因此 TDasset 引入元素模版。对于同一类型的元素，先创建模版，然后基于模版再创建具体的元素，这样便于数据的标准化，并且能大幅提高配置的效率。元素模版里包含了属性模版、分析模版、面板模版、看板模版以及通知规则模版。
